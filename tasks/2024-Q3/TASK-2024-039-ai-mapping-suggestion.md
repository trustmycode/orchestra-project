---
id: TASK-2024-039
title: "Задача 4.6 (AI): Предложение сопоставлений (mapping) BPMN-задач и API с помощью AI"
status: backlog
priority: medium
type: feature
estimate: 12h
created: 2024-07-30
updated: 2024-07-30
parents: [TASK-2024-027]
dependencies: [TASK-2024-097, TASK-2024-098, TASK-2024-031, TASK-2024-036]
arch_refs: [ADR-0016, ADR-0025]
audit_log:
  - {date: 2024-07-30, user: "@RoboticArchitect", action: "created with status backlog"}
---
## Описание
Реализовать в `ProcessToScenarioGenerator` третий уровень стратегии сопоставления, который использует `ai-service` и агента на `sgr-agent-core` для семантического поиска подходящего API-эндпоинта для BPMN-задачи, если явное сопоставление по `operationId` не найдено. Агент должен уметь последовательно фильтровать кандидатов (детерминированными инструментами) и оценивать их семантическое соответствие.

## Ключевые шаги
1. Расширить API `ai-service`, добавив эндпоинт для семантического сопоставления.
2. В `ProcessToScenarioGenerator` реализовать логику обращения к этому эндпоинту.
3. В UI при отображении сгенерированного сценария визуально помечать шаги, сопоставленные с помощью AI, чтобы пользователь мог их проверить.

## Критерии приемки
- При генерации сценария для BPMN-задачи без `operationId` система предлагает наиболее вероятный эндпоинт на основе её имени и описания.
- Сгенерированный шаг помечен как "требующий подтверждения".
