---
id: TASK-2024-074
title: "Задача 4.10.2 (Backend): Адаптация `ai-service` для генерации планов с использованием `sgr-agent-core`"
status: backlog
priority: high
type: task
estimate: 12h
created: 2024-07-30
updated: 2024-07-30
parents: [TASK-2024-072]
dependencies: [TASK-2024-035, TASK-2024-097, TASK-2024-098]
arch_refs: [ADR-0019, ADR-0025]
---
## Описание
Модифицировать `ai-service`, чтобы он генерировал `DataPlan` с использованием агентного фреймворка `sgr-agent-core`. Это заменит ручное создание сложных промптов на более структурированный подход с «инструментами».

## Ключевые шаги
1. Добавить зависимость `sgr-agent-core` в `pom.xml` сервиса `ai-service`.
2. Определить набор «инструментов» (`@Tool`), которые агент сможет использовать (например, для получения информации о схемах API или семантического поиска по векторной БД).
3. Создать `SgrAgent`, сконфигурированный с этими инструментами.
4. Реализовать `AiPlannerService`, который принимает описание сценария как цель и запускает агента для генерации `DataPlan`.

## Критерии приемки
- `ai-service` использует `sgr-agent-core` для своей основной логики.
- Генерация `DataPlan` происходит через вызов агента, который использует определённые Java-инструменты.
