Принято. Задача `TASK-2024-022` (Эпик Execution Engine) выполнена, что является огромным шагом вперед. Это разблокирует множество зависимых задач.

Я обновлю документ с приоритетами, учитывая следующие изменения:

1.  **`TASK-2024-022`** и его подзадачи переходят в статус "Выполнено" (или убираются из списка активных).
2.  **Новые задачи по фронтенду** (Эпик `TASK-2024-108` и его дети) добавляются в план. Учитывая, что это видимая часть продукта, их приоритет должен быть высоким.
3.  **Зависимости:** Задачи, которые были заблокированы `TASK-2024-022` (например, `ASSERTION`-шаги, `Scheduler`), теперь могут быть взяты в работу.

Вот обновленный план.

# Приоритезированный план выполнения задач (v3)

## 1. Обзор текущего состояния

- **Фундамент (Фазы 0-2):** Завершен.
- **Execution Engine (Эпик 3.1):** **ВЫПОЛНЕН.** Асинхронный движок на RabbitMQ готов.
- **Основной фокус:**
  1.  **Frontend 2.0:** Модернизация UI для поддержки новых фич.
  2.  **Assertions:** Реализация проверок БД и Kafka (теперь разблокировано).
  3.  **AI & Data:** Внедрение "умных" функций и генерации данных.
  4.  **Security:** RBAC и изоляция данных.

---

## 2. Детальный приоритезированный список задач

### Приоритет: КРИТИЧЕСКИЙ (Ближайший спринт)

Задачи, которые необходимы для того, чтобы пользователь мог _увидеть_ и _использовать_ новый функционал, а также критические доработки бэкенда, ставшие доступными.

| ID Задачи           | Название                                      | Фаза | Rationale / Обоснование                                                                              |
| :------------------ | :-------------------------------------------- | :--- | :--------------------------------------------------------------------------------------------------- |
| **`TASK-2024-108`** | **Эпик: Модернизация фронтенда (Web 2.0)**    | 5    | **Новый UI — лицо продукта.** Без него новые фичи (AI, графики) будут недоступны или неудобны.       |
| `TASK-2024-109`     | Frontend Foundation (Стек, Роутинг, Тема)     | 5.1  | База для всего нового UI. Блокирует остальные UI-задачи.                                             |
| `TASK-2024-110`     | Миграция основных экранов                     | 5.1  | Перевод существующего функционала на новый дизайн.                                                   |
| `TASK-2024-115`     | **NEW** Меню выбора типа шага и формы         | 5.1  | **Usability.** Критично для удобного создания DB/Kafka тестов без ручного JSON-кодинга.              |
| **`TASK-2024-025`** | **Управление окружениями и секретами**        | 3    | **Блокирует Assertions.** Нельзя проверять БД/Kafka без настроек подключения.                        |
| **`TASK-2024-023`** | **Эпик: ASSERTION-шаги для БД**               | 3    | **Ключевая бизнес-ценность.** Теперь, когда движок готов, нужно добавить проверки побочных эффектов. |
| `TASK-2024-053`     | Рефакторинг для ProtocolPlugin SPI            | 3.2  | Архитектурная основа для добавления новых типов шагов.                                               |
| `TASK-2024-054`     | `DbProtocolPlugin` и управление подключениями | 3.2  | Реализация коннектора к БД.                                                                          |
| `TASK-2024-055`     | Логика polling и валидации для DB-шагов       | 3.2  | Бизнес-логика проверки.                                                                              |

### Приоритет: ВЫСОКИЙ (Следующий этап)

Задачи по безопасности, стабильности и внедрению AI.

| ID Задачи           | Название                                           | Фаза | Rationale / Обоснование                                       |
| :------------------ | :------------------------------------------------- | :--- | :------------------------------------------------------------ |
| **`TASK-2024-028`** | **Эпик: Мультиарендная изоляция (RBAC + RLS)**     | 4    | **Безопасность.** Критично для многопользовательского режима. |
| `TASK-2024-093`     | Настройка RLS и ролей в PostgreSQL                 | 4.1  | Защита данных на уровне БД.                                   |
| `TASK-2024-094`     | Реализация фильтрации на уровне приложения         | 4.1  | Интеграция безопасности в код.                                |
| **`TASK-2024-072`** | **Эпик: AI-генерация данных (Planner + Resolver)** | 4    | **Ключевая AI-фича.** Делает генерацию данных надежной.       |
| `TASK-2024-097`     | Настройка `sgr-agent-core`                         | 4.10 | Фундамент для всех AI-агентов.                                |
| `TASK-2024-073`     | Реализация компонента `Data Resolver`              | 4.10 | Инструмент для получения реальных данных.                     |
| `TASK-2024-098`     | Реализация `Agent Toolbox`                         | 4.10 | Связка AI и бэкенда.                                          |
| `TASK-2024-074`     | Адаптация `ai-service` для генерации планов        | 4.10 | Бизнес-логика генерации.                                      |
| **`TASK-2024-084`** | **Эпик: Scheduler для управления нагрузкой**       | 4    | **Стабильность.** Защита от перегрузки и "шумного соседа".    |
| `TASK-2024-085`     | Модель данных для лимитов                          | 4.8  | Подготовка к планировщику.                                    |
| `TASK-2024-086`     | Реализация логики планировщика                     | 4.8  | Основной алгоритм распределения задач.                        |

### Приоритет: СРЕДНИЙ (Расширение функционала)

Продвинутые возможности генерации, визуализации и оркестрации.

| ID Задачи                         | Название                              | Фаза | Rationale / Обоснование                     |
| :-------------------------------- | :------------------------------------ | :--- | :------------------------------------------ |
| **`TASK-2024-031`**               | **Эпик: Генератор сценариев из BPMN** | 4    | Автоматизация создания тестов.              |
| `TASK-2024-114`                   | API для метаданных процесса           | 4.4  | Нужно для UI-визарда генерации.             |
| `TASK-2024-042` - `TASK-2024-047` | (Подзадачи генератора)                | 4.4  | Реализация алгоритмов обхода графа.         |
| **`TASK-2024-104`**               | **Эпик: Поддержка PlantUML**          | 4    | Расширение источников (Sequence-диаграммы). |
| `TASK-2024-105` - `TASK-2024-107` | (Подзадачи PlantUML)                  | 4.14 | Парсинг и UI для PUML.                      |
| `TASK-2024-111`                   | Frontend: Визуализация PlantUML       | 5.1  | UI-компонент для диаграмм.                  |
| `TASK-2024-112`                   | Frontend: Интерфейсы для AI-функций   | 5.1  | Wizard и подсказки.                         |
| **`TASK-2024-024`**               | **Эпик: ASSERTION-шаги для Kafka**    | 3    | Проверка асинхронных событий.               |
| **`TASK-2024-056`**               | **Эпик: Suite Runner**                | 4    | Запуск наборов тестов.                      |

### Приоритет: НИЗКИЙ (Полировка и эксплуатация)

| ID Задачи                         | Название                                 | Фаза | Rationale / Обоснование                            |
| :-------------------------------- | :--------------------------------------- | :--- | :------------------------------------------------- |
| **`TASK-2024-061`**               | **Эпик: Зависимости между сценариями**   | 4    | Сложная оркестрация.                               |
| **Остальные AI-задачи**           | (Аналитика, Помощники)                   | 4    | Улучшение UX.                                      |
| **Эксплуатация**                  | (Observability, Retention, Partitioning) | 4    | Важно для продакшена, но можно отложить до релиза. |
| `TASK-2024-099` - `TASK-2024-101` | (Задачи по Observability)                | 4.3  | Логи, метрики, трейсинг.                           |
| `TASK-2024-113`                   | Frontend: BPMN Dark Mode                 | 5.1  | Визуальная полировка.                              |

---

### Резюме изменений

1.  **Execution Engine** ушел из списка (сделано).
2.  **Frontend Modernization** поднялся в топ (нужен новый UI).
3.  **Assertions (DB)** поднялись в топ (теперь их можно делать).
4.  **AI** задачи перегруппированы: сначала фундамент (`sgr-agent-core`, `Resolver`), потом прикладные фичи.
