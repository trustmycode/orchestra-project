---
id: ARCH-data-model
title: "Ключевые сущности домена"
type: data_model
layer: domain
owner: '@architect'
version: v1
status: planned
created: 2024-07-29
updated: 2024-07-29
tags: [domain, entity, postgres, jsonb]
depends_on: []
referenced_by: []
---
## Контекст
Этот документ описывает основные сущности доменной модели Orchestra. Модель спроектирована так, чтобы быть независимой от конкретных протоколов и обеспечивать гибкость за счет использования JSONB для хранения динамических данных.

## Структура
*   **`Process`**: Представление бизнес-процесса, импортированного из BPMN или другой нотации.
*   **`ScenarioSuite`**: Набор тестовых сценариев (`TestScenario`), покрывающих один `Process`.
*   **`TestScenario`**: Упорядоченная последовательность шагов (`ScenarioStep`), представляющая один конкретный путь выполнения бизнес-процесса.
*   **`ScenarioStep`**: Атомарное действие (`ACTION`) или проверка (`ASSERTION`) в рамках сценария.
*   **`TestRun`**: Экземпляр выполнения одного `TestScenario` с конкретным набором данных и на конкретном окружении.
*   **`TestDataSet`**: Именованный набор тестовых данных в формате JSON для параметризации сценариев.
*   **`Environment`**: Конфигурация окружения, содержащая профили подключения к тестируемым системам.

В качестве основного хранилища используется **PostgreSQL**. Ключевые связи между сущностями являются реляционными, в то время как гибкие и изменяющиеся структуры (например, тело запроса в шаге, результаты выполнения) хранятся в полях типа `JSONB`.

## Поведение
Сущности образуют иерархическую структуру: `Process` содержит `ScenarioSuite`, который содержит `TestScenario`, состоящий из `ScenarioStep`. `TestRun` является результатом запуска `TestScenario` с использованием `TestDataSet` и `Environment`.
